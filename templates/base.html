<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Family Christmas Wish List ğŸ„{% endblock %}</title>
    <style>
        /* Christmas-themed styling */
        @import url('https://fonts.googleapis.com/css2?family=Mountains+of+Christmas:wght@400;700&family=Lato:wght@400;700&display=swap');

        * { box-sizing: border-box; }

        body {
            font-family: 'Lato', Arial, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #0e3d1f;
            background-image:
                radial-gradient(ellipse at top, #163d1a 0%, #0a2a0f 100%);
            min-height: 100vh;
            color: #333;
        }

        /* Snowflake overlay */
        .snowflakes {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            pointer-events: none;
            z-index: 0;
            overflow: hidden;
        }
        .snowflake {
            position: absolute;
            top: -20px;
            color: #fff;
            font-size: 1.2em;
            opacity: 0.7;
            animation: fall linear infinite;
            user-select: none;
        }
        @keyframes fall {
            to { transform: translateY(110vh) rotate(360deg); opacity: 0; }
        }

        /* Santa background decoration */
        .santa-bg {
            position: fixed;
            left: 0;
            top: 50%;
            transform: translateY(-50%);
            font-size: 9em;
            opacity: 0.12;
            z-index: 0;
            pointer-events: none;
            user-select: none;
            line-height: 1;
        }

        .site-header {
            position: relative;
            z-index: 1;
            text-align: center;
            margin-bottom: 18px;
        }

        .site-header h1 {
            font-family: 'Mountains of Christmas', cursive, serif;
            font-size: 2.6em;
            color: #f5c518;
            text-shadow: 2px 2px 6px rgba(0,0,0,0.5);
            margin: 0;
            letter-spacing: 1px;
        }

        .header-nav {
            position: absolute;
            right: 0;
            top: 50%;
            transform: translateY(-50%);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        /* Language switcher */
        .lang-switcher {
            display: flex;
            gap: 4px;
        }
        .lang-btn {
            padding: 5px 9px;
            border: 2px solid rgba(255,255,255,0.3);
            border-radius: 4px;
            background: rgba(255,255,255,0.1);
            color: #f5c518;
            font-size: 0.8em;
            font-weight: bold;
            cursor: pointer;
            transition: background 0.15s, border-color 0.15s;
        }
        .lang-btn:hover { background: rgba(255,255,255,0.25); border-color: #f5c518; }
        .lang-btn.active { background: #f5c518; color: #0e3d1f; border-color: #f5c518; }

        /* Language popup overlay */
        .lang-popup-overlay {
            display: none;
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,0.65);
            z-index: 9999;
            align-items: center;
            justify-content: center;
        }
        .lang-popup-overlay.visible { display: flex; }
        .lang-popup-box {
            background: #fffdf7;
            border-radius: 14px;
            padding: 36px 40px;
            text-align: center;
            max-width: 380px;
            width: 90%;
            box-shadow: 0 8px 32px rgba(0,0,0,0.5);
            border-top: 6px solid #c41e3a;
        }
        .lang-popup-box h3 {
            color: #c41e3a;
            font-family: 'Mountains of Christmas', cursive, serif;
            font-size: 1.6em;
            margin-top: 0;
        }
        .lang-popup-box p { color: #555; margin-bottom: 20px; }
        .lang-popup-btns { display: flex; justify-content: center; gap: 12px; flex-wrap: wrap; }
        .lang-popup-btns button {
            padding: 10px 22px;
            font-size: 1em;
            font-weight: bold;
            border: 2px solid #c41e3a;
            border-radius: 6px;
            background: #fff;
            color: #c41e3a;
            cursor: pointer;
            transition: background 0.15s, color 0.15s;
        }
        .lang-popup-btns button:hover { background: #c41e3a; color: #fff; }

        h1 {
            color: #c41e3a;
            text-align: center;
        }

        .container {
            position: relative;
            z-index: 1;
            background-color: #fffdf7;
            padding: 28px 32px;
            border-radius: 14px;
            box-shadow: 0 6px 24px rgba(0,0,0,0.4);
            border-top: 6px solid #c41e3a;
            border-bottom: 6px solid #2d6a2d;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }

        th, td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #e8d5b0;
        }

        th {
            background: linear-gradient(135deg, #c41e3a 0%, #a01530 100%);
            color: white;
        }

        tr:hover {
            background-color: #fff8f0;
        }

        .reserved {
            background-color: #ffe6e6;
        }

        form {
            margin: 20px 0;
            padding: 16px 20px;
            background: linear-gradient(135deg, #f9f5ec 0%, #fdf3e3 100%);
            border-radius: 8px;
            border: 1px solid #e8d5b0;
        }

        label {
            display: block;
            margin-top: 10px;
            font-weight: bold;
            color: #2d4a2d;
        }

        input[type="text"], textarea {
            width: 100%;
            padding: 8px;
            margin-top: 5px;
            border: 1px solid #c8a96e;
            border-radius: 4px;
        }

        button {
            padding: 8px 16px;
            margin: 5px 2px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: bold;
        }

        .btn-primary {
            background: linear-gradient(135deg, #2d6a2d 0%, #1e4d1e 100%);
            color: white;
        }
        .btn-primary:hover {
            background: linear-gradient(135deg, #3a8a3a 0%, #2d6a2d 100%);
        }

        .btn-reserve {
            background-color: #007bff;
            color: white;
        }
        .btn-reserve:hover { background-color: #0056b3; }

        .btn-unreserve {
            background-color: #ffc107;
            color: black;
        }
        .btn-unreserve:hover { background-color: #e0a800; }

        .btn-delete {
            background-color: #dc3545;
            color: white;
            font-size: 12px;
            padding: 5px 10px;
        }
        .btn-delete:hover { background-color: #c82333; }

        .btn-danger {
            background: linear-gradient(135deg, #dc3545 0%, #a71d2a 100%);
            color: white;
        }
        .btn-danger:hover { background: linear-gradient(135deg, #e74c5e 0%, #c82333 100%); }

        .info {
            text-align: center;
            margin: 10px 0;
            color: #666;
        }

        a {
            color: #c41e3a;
            text-decoration: none;
        }
        a:hover { text-decoration: underline; }

        /* Who are you page â€” checkbox items */
        .member-option {
            margin: 8px 0;
            padding: 8px 12px;
            border-radius: 6px;
            border: 1px solid #e8d5b0;
            background-color: #fff;
            transition: background 0.15s;
        }
        .member-option:hover {
            background-color: #fff0e0;
            border-color: #c41e3a;
        }
        .member-option input[type="checkbox"] {
            accent-color: #c41e3a;
            width: 16px;
            height: 16px;
        }

        /* Admin nav button override */
        .btn-admin {
            padding: 8px 16px;
            background: linear-gradient(135deg, #555 0%, #333 100%);
            color: white !important;
            border-radius: 4px;
            text-decoration: none !important;
            font-size: 0.9em;
        }
        .btn-admin:hover { background: linear-gradient(135deg, #777 0%, #555 100%); }

        /* Section headings */
        h2 { color: #c41e3a; }
        h3 { color: #2d6a2d; }

        /* Wish progress bar */
        .wish-progress {
            display: flex;
            align-items: center;
            gap: 12px;
            background: linear-gradient(135deg, #e8f5e9 0%, #f1f8e9 100%);
            border: 1px solid #a5d6a7;
            border-radius: 8px;
            padding: 10px 16px;
            margin-bottom: 16px;
        }
        .wish-progress-label { color: #2d6a2d; font-weight: bold; }
        .wish-progress-count { font-size: 1.3em; font-weight: bold; color: #c41e3a; }
        .wish-progress-bar-wrap {
            flex: 1;
            background: #c8e6c9;
            border-radius: 99px;
            height: 10px;
            overflow: hidden;
        }
        .wish-progress-bar-fill {
            height: 100%;
            background: linear-gradient(90deg, #2d6a2d, #66bb6a);
            border-radius: 99px;
            transition: width 0.4s;
        }

        /* Countdown timer */
        .countdown-box {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            background: linear-gradient(135deg, #fff3e0 0%, #ffe0b2 100%);
            border: 1px solid #ffb74d;
            border-radius: 8px;
            padding: 8px 14px;
            margin-bottom: 16px;
            font-weight: bold;
            color: #e65100;
        }
        .countdown-box.passed { background: linear-gradient(135deg, #fce4ec 0%, #f8bbd0 100%); border-color: #e91e63; color: #880e4f; }

        /* Comment section */
        .comments-section { margin-top: 40px; }
        .comments-section h3 { border-bottom: 2px solid #2d6a2d; padding-bottom: 8px; }
        .comment-item {
            background: #fff;
            border: 1px solid #e8d5b0;
            border-radius: 8px;
            padding: 12px 16px;
            margin-bottom: 10px;
        }
        .comment-author { font-weight: bold; color: #c41e3a; margin-bottom: 4px; }
        .comment-text { color: #333; white-space: pre-wrap; }
        .comment-date { font-size: 0.8em; color: #999; margin-top: 4px; }
    </style>
</head>
<body>
    <!-- Santa background decoration -->
    <div class="santa-bg" aria-hidden="true">ğŸ…</div>

    <!-- Snowflakes -->
    <div class="snowflakes" aria-hidden="true">
        <span class="snowflake" style="left:5%;animation-duration:8s;animation-delay:0s;font-size:1em;">â„</span>
        <span class="snowflake" style="left:12%;animation-duration:11s;animation-delay:1s;font-size:0.8em;">â…</span>
        <span class="snowflake" style="left:22%;animation-duration:9s;animation-delay:2s;font-size:1.2em;">â†</span>
        <span class="snowflake" style="left:33%;animation-duration:13s;animation-delay:0.5s;font-size:0.7em;">â„</span>
        <span class="snowflake" style="left:45%;animation-duration:10s;animation-delay:3s;font-size:1.4em;">â…</span>
        <span class="snowflake" style="left:57%;animation-duration:8s;animation-delay:1.5s;font-size:0.9em;">â†</span>
        <span class="snowflake" style="left:68%;animation-duration:12s;animation-delay:0.8s;font-size:1.1em;">â„</span>
        <span class="snowflake" style="left:78%;animation-duration:9s;animation-delay:4s;font-size:0.8em;">â…</span>
        <span class="snowflake" style="left:88%;animation-duration:11s;animation-delay:2.5s;font-size:1.3em;">â†</span>
        <span class="snowflake" style="left:95%;animation-duration:10s;animation-delay:1.2s;font-size:0.6em;">â„</span>
    </div>

    <!-- Language preference popup (shown once for new users) -->
    <div class="lang-popup-overlay" id="langPopup" role="dialog" aria-modal="true" aria-labelledby="langPopupTitle">
        <div class="lang-popup-box">
            <h3 id="langPopupTitle">ğŸ„ Choose language / Sprache wÃ¤hlen / Ğ’Ñ‹Ğ±ĞµÑ€Ğ¸Ñ‚Ğµ ÑĞ·Ñ‹Ğº</h3>
            <p>Please choose your preferred language for this site.</p>
            <div class="lang-popup-btns">
                <button onclick="setLang('en', true)">ğŸ‡¬ğŸ‡§ English</button>
                <button onclick="setLang('de', true)">ğŸ‡©ğŸ‡ª Deutsch</button>
                <button onclick="setLang('ru', true)">ğŸ‡·ğŸ‡º Ğ ÑƒÑÑĞºĞ¸Ğ¹</button>
            </div>
        </div>
    </div>

    <div class="site-header">
        <h1 data-i18n="site_title">ğŸ„ Family Christmas Wish List ğŸ…</h1>
        <div class="header-nav">
            <div class="lang-switcher">
                <button class="lang-btn" id="btn-en" onclick="setLang('en', true)">EN</button>
                <button class="lang-btn" id="btn-de" onclick="setLang('de', true)">DE</button>
                <button class="lang-btn" id="btn-ru" onclick="setLang('ru', true)">RU</button>
            </div>
            {% if session.get('logged_in') %}
                <a href="{{ url_for('admin_panel') }}" class="btn-admin" data-i18n="admin">âš™ï¸ Admin</a>
            {% else %}
                <a href="{{ url_for('admin_login') }}" class="btn-admin" data-i18n="admin">âš™ï¸ Admin</a>
            {% endif %}
        </div>
    </div>
    <div class="container">
        {% block content %}{% endblock %}
    </div>

<script>
// â”€â”€ i18n translations â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const TRANSLATIONS = {
    en: {
        site_title: "ğŸ„ Family Christmas Wish List ğŸ…",
        admin: "âš™ï¸ Admin",
        who_are_you: "Who Are You?",
        who_are_you_sub: "Select your name(s) to see your personal wishlist.",
        select_names: "ğŸ Select your family member name(s):",
        view_wishlist: "ğŸ… View My Wishlist",
        no_members_msg: "No family members in the pool yet. Please ask the admin to add family members first! ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦",
        my_wishlist: "ğŸ My Wishlist",
        viewing_as: "Viewing as:",
        secret_santa_label: "Secret Santa:",
        no_assignments: "No Secret Santa assignments yet. Ask the admin to run Secret Santa!",
        wishlist_closed: "ğŸ”’ The wish list is now closed.",
        deadline_was: "The deadline was",
        no_new_wishes: "No new wishes can be added â€” the list is read-only.",
        add_a_wish: "Add a Wish",
        add_wish_note: "You can add a wish for yourself or on behalf of another family member. Wishes added for other members will not be visible to you (except your Secret Santa receiver's wishes shown below).",
        for_label: "For:",
        wish_required: "Wish (required):",
        product_link_optional: "Product Link (optional):",
        add_wish_btn: "Add Wish",
        your_wishes: "Your Wishes",
        you_are_buying_for: "You Are Buying For",
        wish_col: "Wish",
        product_link_col: "Product Link",
        actions_col: "Actions",
        delete_btn: "Delete",
        view_product: "View Product",
        no_wishes_prefix: "No wishes added yet for",
        users_with_wishes: "Users with wishes:",
        days_left: "days left until deadline",
        deadline_passed: "Deadline has passed",
        no_deadline: "No deadline set",
        comments_title: "ğŸ’¬ Comments",
        leave_comment: "Leave a Comment",
        your_name_opt: "Your name (optional â€” leave blank for anonymous):",
        comment_label: "Comment:",
        submit_comment: "Post Comment",
        no_comments: "No comments yet. Be the first to comment! ğŸ„",
        anonymous: "Anonymous",
        buys_for: "buys for",
    },
    de: {
        site_title: "ğŸ„ Familien-Wunschliste ğŸ…",
        admin: "âš™ï¸ Admin",
        who_are_you: "Wer bist du?",
        who_are_you_sub: "WÃ¤hle deinen Namen, um deine persÃ¶nliche Wunschliste zu sehen.",
        select_names: "ğŸ WÃ¤hle deinen Namen:",
        view_wishlist: "ğŸ… Meine Wunschliste anzeigen",
        no_members_msg: "Noch keine Familienmitglieder. Bitte den Admin, Familienmitglieder hinzuzufÃ¼gen! ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦",
        my_wishlist: "ğŸ Meine Wunschliste",
        viewing_as: "Angemeldet als:",
        secret_santa_label: "Wichteln:",
        no_assignments: "Noch keine Wichtel-Zuteilung. Bitte den Admin!",
        wishlist_closed: "ğŸ”’ Die Wunschliste ist jetzt geschlossen.",
        deadline_was: "Der Stichtag war",
        no_new_wishes: "Keine neuen WÃ¼nsche mÃ¶glich â€” die Liste ist schreibgeschÃ¼tzt.",
        add_a_wish: "Wunsch hinzufÃ¼gen",
        add_wish_note: "Du kannst einen Wunsch fÃ¼r dich oder im Namen eines anderen Familienmitglieds hinzufÃ¼gen.",
        for_label: "FÃ¼r:",
        wish_required: "Wunsch (erforderlich):",
        product_link_optional: "Produktlink (optional):",
        add_wish_btn: "Wunsch hinzufÃ¼gen",
        your_wishes: "Deine WÃ¼nsche",
        you_are_buying_for: "Du kaufst fÃ¼r",
        wish_col: "Wunsch",
        product_link_col: "Produktlink",
        actions_col: "Aktionen",
        delete_btn: "LÃ¶schen",
        view_product: "Produkt anzeigen",
        no_wishes_prefix: "Noch keine WÃ¼nsche fÃ¼r",
        users_with_wishes: "Nutzer mit WÃ¼nschen:",
        days_left: "Tage bis zum Stichtag",
        deadline_passed: "Stichtag ist vergangen",
        no_deadline: "Kein Stichtag gesetzt",
        comments_title: "ğŸ’¬ Kommentare",
        leave_comment: "Kommentar hinterlassen",
        your_name_opt: "Dein Name (optional â€” leer lassen fÃ¼r anonym):",
        comment_label: "Kommentar:",
        submit_comment: "Kommentar senden",
        no_comments: "Noch keine Kommentare. Sei der Erste! ğŸ„",
        anonymous: "Anonym",
        buys_for: "kauft fÃ¼r",
    },
    ru: {
        site_title: "ğŸ„ Ğ¡Ğ¿Ğ¸ÑĞ¾Ğº Ğ¶ĞµĞ»Ğ°Ğ½Ğ¸Ğ¹ ÑĞµĞ¼ÑŒĞ¸ ğŸ…",
        admin: "âš™ï¸ ĞĞ´Ğ¼Ğ¸Ğ½",
        who_are_you: "ĞšÑ‚Ğ¾ Ñ‚Ñ‹?",
        who_are_you_sub: "Ğ’Ñ‹Ğ±ĞµÑ€Ğ¸ ÑĞ²Ğ¾Ñ‘ Ğ¸Ğ¼Ñ, Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ ÑƒĞ²Ğ¸Ğ´ĞµÑ‚ÑŒ ÑĞ¿Ğ¸ÑĞ¾Ğº Ğ¶ĞµĞ»Ğ°Ğ½Ğ¸Ğ¹.",
        select_names: "ğŸ Ğ’Ñ‹Ğ±ĞµÑ€Ğ¸ ÑĞ²Ğ¾Ñ‘ Ğ¸Ğ¼Ñ:",
        view_wishlist: "ğŸ… ĞœĞ¾Ğ¹ ÑĞ¿Ğ¸ÑĞ¾Ğº Ğ¶ĞµĞ»Ğ°Ğ½Ğ¸Ğ¹",
        no_members_msg: "Ğ£Ñ‡Ğ°ÑÑ‚Ğ½Ğ¸ĞºĞ¾Ğ² Ğ¿Ğ¾ĞºĞ° Ğ½ĞµÑ‚. ĞŸĞ¾Ğ¿Ñ€Ğ¾ÑĞ¸Ñ‚Ğµ Ğ°Ğ´Ğ¼Ğ¸Ğ½Ğ¸ÑÑ‚Ñ€Ğ°Ñ‚Ğ¾Ñ€Ğ° Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ¸Ñ…! ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦",
        my_wishlist: "ğŸ ĞœĞ¾Ğ¹ ÑĞ¿Ğ¸ÑĞ¾Ğº Ğ¶ĞµĞ»Ğ°Ğ½Ğ¸Ğ¹",
        viewing_as: "ĞŸÑ€Ğ¾ÑĞ¼Ğ°Ñ‚Ñ€Ğ¸Ğ²Ğ°ĞµÑ‚Ğµ ĞºĞ°Ğº:",
        secret_santa_label: "Ğ¢Ğ°Ğ¹Ğ½Ñ‹Ğ¹ Ğ¡Ğ°Ğ½Ñ‚Ğ°:",
        no_assignments: "ĞĞµÑ‚ Ğ½Ğ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğ¹. ĞŸĞ¾Ğ¿Ñ€Ğ¾ÑĞ¸Ñ‚Ğµ Ğ°Ğ´Ğ¼Ğ¸Ğ½Ğ¸ÑÑ‚Ñ€Ğ°Ñ‚Ğ¾Ñ€Ğ°!",
        wishlist_closed: "ğŸ”’ Ğ¡Ğ¿Ğ¸ÑĞ¾Ğº Ğ¶ĞµĞ»Ğ°Ğ½Ğ¸Ğ¹ Ğ·Ğ°ĞºÑ€Ñ‹Ñ‚.",
        deadline_was: "Ğ¡Ñ€Ğ¾Ğº Ğ±Ñ‹Ğ»",
        no_new_wishes: "ĞĞ¾Ğ²Ñ‹Ğµ Ğ¶ĞµĞ»Ğ°Ğ½Ğ¸Ñ Ğ½ĞµĞ»ÑŒĞ·Ñ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ÑÑ‚ÑŒ â€” ÑĞ¿Ğ¸ÑĞ¾Ğº Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ´Ğ»Ñ Ñ‡Ñ‚ĞµĞ½Ğ¸Ñ.",
        add_a_wish: "Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ¶ĞµĞ»Ğ°Ğ½Ğ¸Ğµ",
        add_wish_note: "Ğ’Ñ‹ Ğ¼Ğ¾Ğ¶ĞµÑ‚Ğµ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ¶ĞµĞ»Ğ°Ğ½Ğ¸Ğµ Ğ´Ğ»Ñ ÑĞµĞ±Ñ Ğ¸Ğ»Ğ¸ Ğ¾Ñ‚ Ğ¸Ğ¼ĞµĞ½Ğ¸ Ğ´Ñ€ÑƒĞ³Ğ¾Ğ³Ğ¾ ÑƒÑ‡Ğ°ÑÑ‚Ğ½Ğ¸ĞºĞ°.",
        for_label: "Ğ”Ğ»Ñ:",
        wish_required: "Ğ–ĞµĞ»Ğ°Ğ½Ğ¸Ğµ (Ğ¾Ğ±ÑĞ·Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ğ¾):",
        product_link_optional: "Ğ¡ÑÑ‹Ğ»ĞºĞ° Ğ½Ğ° Ñ‚Ğ¾Ğ²Ğ°Ñ€ (Ğ½ĞµĞ¾Ğ±ÑĞ·Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ğ¾):",
        add_wish_btn: "Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ¶ĞµĞ»Ğ°Ğ½Ğ¸Ğµ",
        your_wishes: "Ğ’Ğ°ÑˆĞ¸ Ğ¶ĞµĞ»Ğ°Ğ½Ğ¸Ñ",
        you_are_buying_for: "Ğ’Ñ‹ Ğ¿Ğ¾ĞºÑƒĞ¿Ğ°ĞµÑ‚Ğµ Ğ´Ğ»Ñ",
        wish_col: "Ğ–ĞµĞ»Ğ°Ğ½Ğ¸Ğµ",
        product_link_col: "Ğ¡ÑÑ‹Ğ»ĞºĞ°",
        actions_col: "Ğ”ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ñ",
        delete_btn: "Ğ£Ğ´Ğ°Ğ»Ğ¸Ñ‚ÑŒ",
        view_product: "ĞŸĞ¾ÑĞ¼Ğ¾Ñ‚Ñ€ĞµÑ‚ÑŒ Ñ‚Ğ¾Ğ²Ğ°Ñ€",
        no_wishes_prefix: "Ğ–ĞµĞ»Ğ°Ğ½Ğ¸Ğ¹ Ğ¿Ğ¾ĞºĞ° Ğ½ĞµÑ‚ Ğ´Ğ»Ñ",
        users_with_wishes: "Ğ£Ñ‡Ğ°ÑÑ‚Ğ½Ğ¸ĞºĞ¾Ğ² Ñ Ğ¶ĞµĞ»Ğ°Ğ½Ğ¸ÑĞ¼Ğ¸:",
        days_left: "Ğ´Ğ½ĞµĞ¹ Ğ´Ğ¾ ÑÑ€Ğ¾ĞºĞ°",
        deadline_passed: "Ğ¡Ñ€Ğ¾Ğº Ğ¿Ñ€Ğ¾ÑˆÑ‘Ğ»",
        no_deadline: "Ğ¡Ñ€Ğ¾Ğº Ğ½Ğµ Ğ·Ğ°Ğ´Ğ°Ğ½",
        comments_title: "ğŸ’¬ ĞšĞ¾Ğ¼Ğ¼ĞµĞ½Ñ‚Ğ°Ñ€Ğ¸Ğ¸",
        leave_comment: "ĞÑÑ‚Ğ°Ğ²Ğ¸Ñ‚ÑŒ ĞºĞ¾Ğ¼Ğ¼ĞµĞ½Ñ‚Ğ°Ñ€Ğ¸Ğ¹",
        your_name_opt: "Ğ’Ğ°ÑˆĞµ Ğ¸Ğ¼Ñ (Ğ½ĞµĞ¾Ğ±ÑĞ·Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ â€” Ğ¾ÑÑ‚Ğ°Ğ²ÑŒÑ‚Ğµ Ğ¿ÑƒÑÑ‚Ñ‹Ğ¼ Ğ´Ğ»Ñ Ğ°Ğ½Ğ¾Ğ½Ğ¸Ğ¼Ğ°):",
        comment_label: "ĞšĞ¾Ğ¼Ğ¼ĞµĞ½Ñ‚Ğ°Ñ€Ğ¸Ğ¹:",
        submit_comment: "ĞÑ‚Ğ¿Ñ€Ğ°Ğ²Ğ¸Ñ‚ÑŒ",
        no_comments: "ĞšĞ¾Ğ¼Ğ¼ĞµĞ½Ñ‚Ğ°Ñ€Ğ¸ĞµĞ² Ğ¿Ğ¾ĞºĞ° Ğ½ĞµÑ‚. Ğ‘ÑƒĞ´ÑŒÑ‚Ğµ Ğ¿ĞµÑ€Ğ²Ñ‹Ğ¼! ğŸ„",
        anonymous: "ĞĞ½Ğ¾Ğ½Ğ¸Ğ¼",
        buys_for: "Ğ¿Ğ¾ĞºÑƒĞ¿Ğ°ĞµÑ‚ Ğ´Ğ»Ñ",
    }
};

// â”€â”€ Cookie helpers â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function getCookie(name) {
    const v = document.cookie.split('; ').find(r => r.startsWith(name + '='));
    return v ? decodeURIComponent(v.split('=')[1]) : null;
}
function setCookie(name, value, days) {
    const d = new Date();
    d.setTime(d.getTime() + days * 86400000);
    document.cookie = name + '=' + encodeURIComponent(value) + ';expires=' + d.toUTCString() + ';path=/';
}

// â”€â”€ Apply translations â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function applyTranslations(lang) {
    const t = TRANSLATIONS[lang] || TRANSLATIONS['en'];
    document.querySelectorAll('[data-i18n]').forEach(el => {
        const key = el.getAttribute('data-i18n');
        if (t[key] !== undefined) el.textContent = t[key];
    });
    // Update active button state
    ['en', 'de', 'ru'].forEach(l => {
        const btn = document.getElementById('btn-' + l);
        if (btn) btn.classList.toggle('active', l === lang);
    });
}

// â”€â”€ Set language â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function setLang(lang, reload) {
    setCookie('lang', lang, 365);
    document.getElementById('langPopup').classList.remove('visible');
    applyTranslations(lang);
    if (reload) location.reload();
}

// â”€â”€ On page load â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
(function() {
    const lang = getCookie('lang');
    if (!lang) {
        // Show language selection popup for new users
        document.getElementById('langPopup').classList.add('visible');
    } else {
        applyTranslations(lang);
    }
})();
</script>
</body>
</html>
